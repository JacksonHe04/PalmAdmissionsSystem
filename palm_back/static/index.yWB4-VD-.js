import{d as N,_ as y,r as g,w as U,a as s,o as c,c as f,b as i,e as a,f as w,g as h,F as x,h as C,i as V,t as B,j as S}from"./index.D6F5jCvO.js";const I=N("students",{state:()=>({students:[],visibleFields:["序号","照片","姓名","邮箱","手机号","本科院校","专业人数","百分比","状态","操作"]}),actions:{async fetchStudents(){try{const l=await api.get("/students");this.students=l.data||[]}catch(l){console.error("获取学生数据失败:",l)}}}}),T={props:{fields:Array,visibleFields:Array},emits:["update-visible-fields"],setup(l,{emit:t}){const n=g([...l.visibleFields]);return U(()=>l.visibleFields,_=>{n.value=[..._]}),{checkedFields:n,updateFields:()=>{t("update-visible-fields",n.value)}}}},j={class:"floating-container"},A={class:"checkbox-row"};function O(l,t,n,e,_,v){const u=s("el-checkbox"),p=s("el-checkbox-group"),m=s("el-collapse-item"),b=s("el-collapse");return c(),f(b,null,{default:i(()=>[a(m,{title:"选择字段",name:"1"},{default:i(()=>[w("div",j,[a(p,{modelValue:e.checkedFields,"onUpdate:modelValue":t[0]||(t[0]=d=>e.checkedFields=d),onChange:e.updateFields},{default:i(()=>[w("div",A,[(c(!0),h(x,null,C(n.fields,d=>(c(),f(u,{key:d,label:d,class:"horizontal-checkbox"},{default:i(()=>[V(B(d),1)]),_:2},1032,["label"]))),128))])]),_:1},8,["modelValue","onChange"])])]),_:1})]),_:1})}const D=y(T,[["render",O],["__scopeId","data-v-6da39f61"]]),E={props:{total:Number,currentPage:Number,pageSize:Number},emits:["page-change"],setup(l,{emit:t}){return{onPageChange:e=>{t("page-change",e)}}}};function L(l,t,n,e,_,v){const u=s("el-pagination");return c(),f(u,{onCurrentChange:e.onPageChange,"current-page":n.currentPage,"page-size":n.pageSize,total:n.total,layout:"prev, pager, next"},null,8,["onCurrentChange","current-page","page-size","total"])}const q=y(E,[["render",L]]),G={components:{FieldSelector:D,Pagination:q},setup(){const l=I(),t=g(""),n=g(1),e=g(10),_=g(""),v=["序号","照片","姓名","昵称","邮箱","手机号","本科院校","本科专业","百分比","专业人数","排名","硕士院校","硕士专业","硕士导师","性别","出生年月","报名类型","第一志愿","第二志愿","第三志愿","服从调剂","论文发表","奖项荣誉","简历","证明材料","状态","创建时间","操作"],u=S(()=>l.visibleFields),p={序号:"id",姓名:"name",邮箱:"email",状态:"status",操作:""},m=S(()=>l.students||[]),b=S(()=>m.value.filter(r=>Object.values(r).some(k=>k.toString().includes(t.value))).slice((n.value-1)*e.value,n.value*e.value));return{filterText:t,currentPage:n,pageSize:e,selectedSort:_,allFields:v,visibleFields:u,fieldProps:p,filteredStudents:b,onFilter:()=>{n.value=1},updateVisibleFields:r=>{l.visibleFields=r},onPageChange:r=>{n.value=r}}}},H={class:"students-form"};function J(l,t,n,e,_,v){const u=s("field-selector"),p=s("el-col"),m=s("el-input"),b=s("el-option"),d=s("el-select"),P=s("el-row"),F=s("el-table-column"),r=s("el-button"),k=s("el-table");return c(),h("div",H,[a(P,null,{default:i(()=>[a(p,{span:6},{default:i(()=>[a(u,{fields:e.allFields,"visible-fields":e.visibleFields,onUpdateVisibleFields:e.updateVisibleFields},null,8,["fields","visible-fields","onUpdateVisibleFields"])]),_:1}),a(p,{span:18,class:"search-filter"},{default:i(()=>[a(m,{modelValue:e.filterText,"onUpdate:modelValue":t[0]||(t[0]=o=>e.filterText=o),placeholder:"搜索姓名、邮箱或手机号",onInput:e.onFilter},null,8,["modelValue","onInput"]),a(d,{modelValue:e.selectedSort,"onUpdate:modelValue":t[1]||(t[1]=o=>e.selectedSort=o),placeholder:"排序"},{default:i(()=>[(c(!0),h(x,null,C(l.sortOptions,o=>(c(),f(b,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),a(k,{data:e.filteredStudents,style:{width:"100%"},"default-sort":{prop:e.selectedSort,order:"ascending"}},{default:i(()=>[(c(!0),h(x,null,C(e.visibleFields,o=>(c(),f(F,{key:o,prop:e.fieldProps[o],label:o},null,8,["prop","label"]))),128)),a(F,{label:"操作",width:"150"},{default:i(({row:o})=>[a(r,{type:"text",onClick:z=>l.editStudent(o)},{default:i(()=>t[2]||(t[2]=[V("编辑")])),_:2},1032,["onClick"]),a(r,{type:"text",onClick:z=>l.deleteStudent(o)},{default:i(()=>t[3]||(t[3]=[V("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","default-sort"])])}const K=y(G,[["render",J],["__scopeId","data-v-d953a9ef"]]),Q={__name:"index",setup(l){return(t,n)=>(c(),f(K))}};export{Q as default};
